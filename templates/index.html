<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Flashcard Study Tool</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}{% if asset_versions and asset_versions.css %}?v={{ asset_versions.css }}{% endif %}">
</head>
<body>

<div id="welcome">
  <h1>🧠 AI Flashcard Study Tool</h1>
  {% if selected_deck %}
    {% set selected_name = (display_names[selected_deck] if display_names and selected_deck in display_names else selected_deck.replace('_', ' ')) %}
    <p><strong>{{ selected_name }}</strong> has <strong>{{ deck_size }}</strong> cards.</p>
  {% else %}
    <p>There are <strong>{{ deck_size }}</strong> cards in this deck.</p>
  {% endif %}
  {% if decks %}
  <form method="get" class="deck-form">
    <label for="deck">Select deck:</label>
    <select id="deck" name="deck" onchange="this.form.submit()">
      {% for d in decks %}
      {% set nice = (display_names[d] if display_names and d in display_names else d.replace('_', ' ')) %}
      <option value="{{ d }}" {% if d == selected_deck %}selected{% endif %}>{{ nice }}</option>
      {% endfor %}
    </select>
    <noscript>
      <button type="submit">Load</button>
    </noscript>
  </form>
  {% endif %}
  <p class="welcome-instructions">
    Press Enter to Start. Use arrow keys to navigate, spacebar to flip cards.
  </p>
  <button id="start-btn">Start Session</button>
  
</div>

<div id="card-container">
  {% for term, definition in cards %}
  <div class="card">
    <div class="progress"></div>
    <div class="card-inner">
      <div class="card-front">
        <div class="term">{{ term }}</div>
      </div>
      <div class="card-back">
        <div class="definition">{{ definition }}</div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<!-- Actions at top: Correct / Missed -->
<div class="actions">
  <button class="score-btn" onclick="markAnswer(true)">✓ Correct</button>
  <button class="miss-btn" onclick="markAnswer(false)">✗ Missed</button>
</div>

<!-- Controls: keep Flip and add Shuffle -->
<div class="controls">
  <button class="nav-btn" onclick="flipCard()" id="flip-btn">Flip Card</button>
  <button class="nav-btn" onclick="shuffleDeck()" id="shuffle-btn">Shuffle</button>
  <div style="font-size: 0.85rem; color: #6c757d; max-width: 600px; text-align: center;">
    Tip: Use keyboard ← → to navigate, Space/Enter to flip, G for correct, M for missed.
  </div>
  
</div>

<div id="result">
  <h2>🎉 Session Complete!</h2>
  <div id="score"></div>
  <button id="restart-btn" onclick="restart()">Play Again</button>
</div>

<div class="keyboard-hint">
  <strong>Keyboard shortcuts:</strong> ← → to navigate, Space/Enter to flip, G for "correct", M for "missed"
</div>

<script src="{{ url_for('static', filename='js/app.js') }}{% if asset_versions and asset_versions.js %}?v={{ asset_versions.js }}{% endif %}"></script>

</body>
</html>
